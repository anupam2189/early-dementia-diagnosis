<GridLayout #formControls [formGroup]="loginSignupForm" class="my-background" width="100%" height="100%" columns="*" rows="*, auto">
    <StackLayout verticalAlignment="center" class="login-panel" row="0">
        <ScrollView height="100%">
            <StackLayout>
                <Image id="logoLarge"
                       horizontalAlignment="center"
                       style="height:200px;margin-top:100px"
                       src="res://app/images/apple.jpg"
                       *ngIf="isLoggingIn">
                </Image>
                <Image id="logoSmall"
                       horizontalAlignment="center"
                       style="height:100px;margin-top:50px"
                       src="res://app/images/apple.jpg"
                       *ngIf="!isLoggingIn">
                </Image>

                <Label class="error-message" *ngIf="loginError && isLoggingIn" [text]="'Invalid email address or password'"></Label>
                <TextField #email
                           formControlName="email"
                           hint="Email Address"
                           keyboardType="email"
                           returnKeyType="next"
                           (returnPress)="isLoggingIn ? focusPassword() : focusFirstName()"
                           autocorrect="false"
                           autocapitalizationType="none"
                           [isEnabled]="!isAuthenticating">
                </TextField>
                <TextField #firstName
                           formControlName="firstName"
                           returnKeyType="next"
                           required
                           *ngIf="!isLoggingIn"
                           hint="First Name"
                           (returnPress)="focusLastName()"
                           autocorrect="false"
                           autocapitalizationType="words">
                </TextField>
                <TextField #lastName
                           formControlName="lastName"
                           returnKeyType="next"
                           required
                           *ngIf="!isLoggingIn"
                           hint="Last Name"
                           (returnPress)="focusDateOfBirth()"
                           autocorrect="false"
                           autocapitalizationType="words">
                </TextField>
                <TextField #dateOfBirth
                           formControlName="dateOfBirth"
                           required
                           *ngIf="!isLoggingIn"
                           id="textFieldBDate"
                           hint="Date Of Birth"
                           [text]='birthDate | date:"MM/dd/yy"'
                           (tap)="showDatePicker()"
                           row="29" col="1"
                           (returnPress)="focusPassword()"
                           returnKeyType="next">
                </TextField>
                <StackLayout [visibility]="isDatePickerVisible ? 'visible' : 'collapsed'" row="0" col="0">
                    <DatePicker class="m-15" id="datePicker" #dp [visibility]="isDatePickerVisible ? 'visible' : 'collapsed'" ></DatePicker>
                    <Button class="btn my-btn-primary btn-active"
                            text="Select"
                            (tap)="enterDate()"
                            [visibility]="isDatePickerVisible ? 'visible' : 'collapsed'">
                    </Button>
                </StackLayout>
                <TextField #password
                           formControlName="password"
                           required
                           hint="Password"
                           secure="true"
                           (returnPress)="isLoggingIn ? submit() : focusConfirmPassword()"
                           returnKeyType="next">
                </TextField>
                <TextField #confirmPassword
                           formControlName="confirmPassword"
                           required
                           *ngIf="!isLoggingIn"
                           hint="Confirm Password"
                           secure="true"
                           returnKeyType="done"
                           (returnPress)="submitOrFocusUsername()">
                </TextField>
                <Label *ngIf="!userConfirmPasswordControl.pristine && userPasswordControl.value != userConfirmPasswordControl.value"
                       text="Passwords much match!">
                </Label>
                <ActivityIndicator [busy]="isAuthenticating" [visibility]="isAuthenticating ? 'visible' : 'collapse'"
                                   row="2" style="color:#ffffff;">
                </ActivityIndicator>
                <Button [text]="isLoggingIn ? 'Sign in' : 'Register'"
                        class="my-btn-primary"
                        [isEnabled]="loginSignupForm.valid"
                        [opacity]="loginSignupForm.valid ? '1' : '0.5'"
                        [isEnabled]="!isAuthenticating"
                        (tap)="submit()"
                        [isEnabled]="isLoggingIn ? userEmailControl.valid : loginSignupForm.valid">
                </Button>
                <Label class="forgot-password-label"
                       text="Forgot password?"
                       (tap)="forgotPassword()"
                       *ngIf="isLoggingIn">
                </Label>
            </StackLayout>
        </ScrollView>
    </StackLayout>
    <StackLayout [visibility]="isDatePickerVisible ? 'collapsed' : 'visible'" row="1">
        <Button [text]="isLoggingIn ? 'Create an Account' : 'Back to login'"
                (tap)="toggleDisplay()"
                class="my-btn-minor">
        </Button>
    </StackLayout>
</GridLayout>
